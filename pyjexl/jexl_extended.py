from .jexl import JEXL
from .extended_grammar import ExtendedGrammar
import random
import math


class JexlExtended(JEXL):
    def __init__(self, context=None):
        super().__init__(context=context)

        # String functions
        super().add_function("string", ExtendedGrammar.to_string)
        super().add_function("$string", ExtendedGrammar.to_string)
        super().add_transform("toString", ExtendedGrammar.to_string)
        super().add_transform("string", ExtendedGrammar.to_string)
        super().add_function("length", ExtendedGrammar.length)
        super().add_function("$length", ExtendedGrammar.length)
        super().add_transform("length", ExtendedGrammar.length)
        super().add_function("count", ExtendedGrammar.length)
        super().add_function("$count", ExtendedGrammar.length)
        super().add_transform("count", ExtendedGrammar.length)
        super().add_function("size", ExtendedGrammar.length)
        super().add_function("$size", ExtendedGrammar.length)
        super().add_transform("size", ExtendedGrammar.length)
        super().add_function("substring", ExtendedGrammar.substring)
        super().add_function("$substring", ExtendedGrammar.substring)
        super().add_transform("substring", ExtendedGrammar.substring)
        super().add_function("substringBefore", ExtendedGrammar.substring_before)
        super().add_function("$substringBefore", ExtendedGrammar.substring_before)
        super().add_transform("substringBefore", ExtendedGrammar.substring_before)
        super().add_function("substringAfter", ExtendedGrammar.substring_after)
        super().add_function("$substringAfter", ExtendedGrammar.substring_after)
        super().add_transform("substringAfter", ExtendedGrammar.substring_after)
        super().add_function("uppercase", ExtendedGrammar.uppercase)
        super().add_function("$uppercase", ExtendedGrammar.uppercase)
        super().add_transform("uppercase", ExtendedGrammar.uppercase)
        super().add_function("upper", ExtendedGrammar.uppercase)
        super().add_function("$upper", ExtendedGrammar.uppercase)
        super().add_transform("upper", ExtendedGrammar.uppercase)
        super().add_function("lowercase", ExtendedGrammar.lowercase)
        super().add_function("$lowercase", ExtendedGrammar.lowercase)
        super().add_transform("lowercase", ExtendedGrammar.lowercase)
        super().add_function("lower", ExtendedGrammar.lowercase)
        super().add_function("$lower", ExtendedGrammar.lowercase)
        super().add_transform("lower", ExtendedGrammar.lowercase)
        super().add_function("camelCase", ExtendedGrammar.camel_case)
        super().add_function("$camelCase", ExtendedGrammar.camel_case)
        super().add_transform("camelCase", ExtendedGrammar.camel_case)
        super().add_transform("camelcase", ExtendedGrammar.camel_case)
        super().add_transform("toCamelCase", ExtendedGrammar.camel_case)
        super().add_function("pascalCase", ExtendedGrammar.pascal_case)
        super().add_function("$pascalCase", ExtendedGrammar.pascal_case)
        super().add_transform("pascalCase", ExtendedGrammar.pascal_case)
        super().add_transform("pascalcase", ExtendedGrammar.pascal_case)
        super().add_transform("toPascalCase", ExtendedGrammar.pascal_case)
        super().add_function("trim", ExtendedGrammar.trim)
        super().add_function("$trim", ExtendedGrammar.trim)
        super().add_transform("trim", ExtendedGrammar.trim)
        super().add_function("pad", ExtendedGrammar.pad)
        super().add_function("$pad", ExtendedGrammar.pad)
        super().add_transform("pad", ExtendedGrammar.pad)
        super().add_function("contains", ExtendedGrammar.contains)
        super().add_function("$contains", ExtendedGrammar.contains)
        super().add_transform("contains", ExtendedGrammar.contains)
        super().add_function("includes", ExtendedGrammar.contains)
        super().add_function("$includes", ExtendedGrammar.contains)
        super().add_transform("includes", ExtendedGrammar.contains)
        super().add_function("split", ExtendedGrammar.split)
        super().add_function("$split", ExtendedGrammar.split)
        super().add_transform("split", ExtendedGrammar.split)
        super().add_function("join", ExtendedGrammar.join)
        super().add_function("$join", ExtendedGrammar.join)
        super().add_transform("join", ExtendedGrammar.join)
        super().add_function("replace", ExtendedGrammar.replace)
        super().add_function("$replace", ExtendedGrammar.replace)
        super().add_transform("replace", ExtendedGrammar.replace)
        super().add_function("base64Encode", ExtendedGrammar.base64_encode)
        super().add_function("$base64Encode", ExtendedGrammar.base64_encode)
        super().add_transform("base64Encode", ExtendedGrammar.base64_encode)
        super().add_function("base64Decode", ExtendedGrammar.base64_decode)
        super().add_function("$base64Decode", ExtendedGrammar.base64_decode)
        super().add_transform("base64Decode", ExtendedGrammar.base64_decode)

        # Number functions
        super().add_function("number", ExtendedGrammar.to_number)
        super().add_function("$number", ExtendedGrammar.to_number)
        super().add_transform("number", ExtendedGrammar.to_number)
        super().add_transform("toNumber", ExtendedGrammar.to_number)
        super().add_function("parseFloat", ExtendedGrammar.to_number)
        super().add_function("$parseFloat", ExtendedGrammar.to_number)
        super().add_transform("float", ExtendedGrammar.to_number)
        super().add_transform("toFloat", ExtendedGrammar.to_number)
        super().add_function("parseInteger", ExtendedGrammar.to_int)
        super().add_function("parseInt", ExtendedGrammar.to_int)
        super().add_function("$parseInteger", ExtendedGrammar.to_int)
        super().add_transform("parseInteger", ExtendedGrammar.to_int)
        super().add_transform("parseInt", ExtendedGrammar.to_int)
        super().add_transform("toInt", ExtendedGrammar.to_int)
        super().add_transform("integer", ExtendedGrammar.to_int)
        super().add_function("abs", ExtendedGrammar.abs)
        super().add_function("$abs", ExtendedGrammar.abs)
        super().add_transform("abs", ExtendedGrammar.abs)
        super().add_function("floor", ExtendedGrammar.floor)
        super().add_function("$floor", ExtendedGrammar.floor)
        super().add_transform("floor", ExtendedGrammar.floor)
        super().add_function("ceil", ExtendedGrammar.ceil)
        super().add_function("$ceil", ExtendedGrammar.ceil)
        super().add_transform("ceil", ExtendedGrammar.ceil)
        super().add_function("round", ExtendedGrammar.round)
        super().add_function("$round", ExtendedGrammar.round)
        super().add_transform("round", ExtendedGrammar.round)
        super().add_function("power", ExtendedGrammar.power)
        super().add_function("$power", ExtendedGrammar.power)
        super().add_transform("power", ExtendedGrammar.power)
        super().add_function("sqrt", ExtendedGrammar.sqrt)
        super().add_function("$sqrt", ExtendedGrammar.sqrt)
        super().add_transform("sqrt", ExtendedGrammar.sqrt)
        super().add_function("random", ExtendedGrammar.random)
        super().add_function("$random", ExtendedGrammar.random)
        super().add_function("formatNumber", ExtendedGrammar.format_number)
        super().add_function("$formatNumber", ExtendedGrammar.format_number)
        super().add_transform("formatNumber", ExtendedGrammar.format_number)
        super().add_function("formatBase", ExtendedGrammar.format_base)
        super().add_function("$formatBase", ExtendedGrammar.format_base)
        super().add_transform("formatBase", ExtendedGrammar.format_base)
        super().add_function("formatInteger", ExtendedGrammar.format_integer)
        super().add_function("$formatInteger", ExtendedGrammar.format_integer)
        super().add_transform("formatInteger", ExtendedGrammar.format_integer)
        super().add_function("sum", ExtendedGrammar.sum)
        super().add_function("$sum", ExtendedGrammar.sum)
        super().add_transform("sum", ExtendedGrammar.sum)
        super().add_function("max", ExtendedGrammar.max)
        super().add_function("$max", ExtendedGrammar.max)
        super().add_transform("max", ExtendedGrammar.max)
        super().add_function("min", ExtendedGrammar.min)
        super().add_function("$min", ExtendedGrammar.min)
        super().add_transform("min", ExtendedGrammar.min)
